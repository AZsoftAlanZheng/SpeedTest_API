'use strict';

module.exports = function compileParams(hrefVariablesElement) {
  var params = {};

  if (!hrefVariablesElement) return params;

  hrefVariablesElement.forEach(function (valueElement, keyElement, memberElement) {
    var name = keyElement.toValue();
    var typeAttributes = memberElement.attributes.getValue('typeAttributes') || [];
    var values = valueElement.attributes.getValue('enumerations') || [];

    params[name] = {
      required: Array.from(typeAttributes).includes('required'),
      default: valueElement.attributes.getValue('default'),
      example: valueElement.toValue() || values[0],
      values
    };

    return params;
  });
  return params;
};